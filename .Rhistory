geom_point(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="brown1"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="darkorange"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic()
ggplot(major_models)+
geom_line(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="brown1"))+
xlab("")+
geom_line(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="darkorange"))+
xlab("")+
geom_line(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_line(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic()
ggplot(major_models)+
geom_point(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="brown1"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="darkorange"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<20))+
geom_point(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="brown1"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="darkorange"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<20))+
geom_point(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="brown1"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="darkorange"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<20))+
geom_point(aes(x=propertyaddresscity,
y=ridge_MAPE,
color="red"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=LASSO_MAPE,
color="blue"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<20))+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Model performance",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<5))+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
xlab("")+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<5))+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
ggplot(major_models%>%filter(gb_MAPE<5))+
geom_point(aes(x=propertyaddresscity,
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
dta<-major_models%>%filter(gb_MAPE<5)
ggplot()+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
dta<-major_models%>%filter(gb_MAPE<5)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity,
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
dta$propertyaddresscity[order(dta$rf_MAPE)]
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$LASSO_MSE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$LASSO_MSE)],
y=gb_MAPE,
color="aquamarine2"))+
xlab("")+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
dta<-major_models%>%filter(gb_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank())
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.title="yo")
dta<-major_models%>%filter(gb_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank())
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.text = "s")
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(gb_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5, gradient boosting in blue") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=LASSO_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
ggplot(dta)+
geom_point(aes(x=dta$propertyaddresscity[order(dta$rf_MAPE)],
y=LASSO_MAPE,
color="chartreuse"))+
geom_point(aes(x=dta$propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=LASSO_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(ridge_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=LASSO_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(gb_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(ridge_MAPE<1)
dta<-major_models%>%filter(ridge_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(gb_MAPE<1,rf_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=rf_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="aquamarine2"))+
ggtitle("Random forest mostly outperform gradient boosting",
subtitle = "Showing models with MAPE < 5, gradient boosting in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(ridge_MAPE<1,LASSO_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=LASSO_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
dta<-major_models%>%filter(ridge_MAPE<1,gb_MAPE<1)
dta<-major_models%>%filter(ridge_MAPE<1,gb_MAPE<1)
ggplot(dta)+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=gb_MAPE,
color="chartreuse"))+
geom_point(aes(x=propertyaddresscity[order(dta$rf_MAPE)],
y=ridge_MAPE,
color="aquamarine2"))+
ggtitle("Ridge and LASSO have similar performance",
subtitle = "Showing models with MAPE < 5, ridge in blue") +
xlab("City-level subsamples") +
ylab("MAPE")+
labs(caption = "Source: ATTOM Data Solutions",
fill = "Model") +
theme_classic() +
theme(axis.text.x=element_blank(),
legend.position = "none")
ggplot(major_models,
aes(
x = price,
y = floodrisk,
color = floodrisk1,
size = num,
shape = rf_1st
)) +
geom_point() +
geom_jitter() +
scale_size(guide = "none")+
scale_color_brewer(palette = "OrRd",
direction = -1) +
scale_x_continuous(name = "Average property value ($)",
breaks = seq(0, 2000000, by = 200000)) +
scale_y_continuous(name = "Level of flood risk") +
geom_text(
data = major_models%>%filter(rf_MPE < 0.3,
floodrisk > 0.03),
aes(label = propertyaddresscity),
color = "black",
size = 2.5,
hjust = -0.3,
vjust = -0.3
) +
ggtitle("Primary factor of property value in cities",
subtitle = "Cities with high flood risk and high prediction accuracy (within 30%) annotated") +
labs(caption = "Source: ATTOM Data Solutions") +
theme_classic() +
theme(axis.text.x = element_text(angle = 30, hjust = 1))
#Store (and report) a current version of data here
report.dim <- function(dta) {
cat("Up to here, the data dimension is",
dim(dta)[1],
"*",
dim(dta)[2])
}
home_dta_ver1 <- home_dta
home_dta_ver1 %>% report.dim()
